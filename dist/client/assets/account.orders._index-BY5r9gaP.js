import{w as g,u as S,e as O,b as R,r as E,L as o}from"./chunk-TMI4QPZX-DO0jBZYa.js";import{j as e}from"./jsx-runtime-D0bAEALd.js";import{P as M}from"./PaginatedResourceSection-BOdDzrNE.js";import{f as C}from"./index-Digrjsd9.js";import{M as F}from"./Money-t5T8g3vm.js";import"./preload-helper-Ov0MN9ZI.js";const a={NAME:"name",CONFIRMATION_NUMBER:"confirmation_number"},U=()=>[{title:"Orders"}],B=g(function(){const{customer:n,filters:s}=S(),{orders:t}=n;return e.jsxs("div",{className:"orders",children:[e.jsx(v,{currentFilters:s}),e.jsx(I,{orders:t,filters:s})]})});function I({orders:r,filters:n}){const s=!!(n.name||n.confirmationNumber);return e.jsx("div",{className:"acccount-orders","aria-live":"polite",children:r!=null&&r.nodes.length?e.jsx(M,{connection:r,children:({node:t})=>e.jsx(y,{order:t},t.id)}):e.jsx(_,{hasFilters:s})})}function _({hasFilters:r=!1}){return e.jsx("div",{children:r?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"No orders found matching your search."}),e.jsx("br",{}),e.jsx("p",{children:e.jsx(o,{to:"/account/orders",children:"Clear filters →"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"You haven't placed any orders yet."}),e.jsx("br",{}),e.jsx("p",{children:e.jsx(o,{to:"/collections",children:"Start Shopping →"})})]})})}function v({currentFilters:r}){var d,u;const[n,s]=O(),t=R(),c=t.state!=="idle"&&((u=(d=t.location)==null?void 0:d.pathname)==null?void 0:u.includes("orders")),m=E.useRef(null),N=i=>{var j,p;i.preventDefault();const h=new FormData(i.currentTarget),l=new URLSearchParams,f=(j=h.get(a.NAME))==null?void 0:j.toString().trim(),x=(p=h.get(a.CONFIRMATION_NUMBER))==null?void 0:p.toString().trim();f&&l.set(a.NAME,f),x&&l.set(a.CONFIRMATION_NUMBER,x),s(l)},b=r.name||r.confirmationNumber;return e.jsx("form",{ref:m,onSubmit:N,className:"order-search-form","aria-label":"Search orders",children:e.jsxs("fieldset",{className:"order-search-fieldset",children:[e.jsx("legend",{className:"order-search-legend",children:"Filter Orders"}),e.jsxs("div",{className:"order-search-inputs",children:[e.jsx("input",{type:"search",name:a.NAME,placeholder:"Order #","aria-label":"Order number",defaultValue:r.name||"",className:"order-search-input"}),e.jsx("input",{type:"search",name:a.CONFIRMATION_NUMBER,placeholder:"Confirmation #","aria-label":"Confirmation number",defaultValue:r.confirmationNumber||"",className:"order-search-input"})]}),e.jsxs("div",{className:"order-search-buttons",children:[e.jsx("button",{type:"submit",disabled:c,children:c?"Searching":"Search"}),b&&e.jsx("button",{type:"button",disabled:c,onClick:()=>{var i;s(new URLSearchParams),(i=m.current)==null||i.reset()},children:"Clear"})]})]})})}function y({order:r}){var s;const n=(s=C(r.fulfillments)[0])==null?void 0:s.status;return e.jsxs(e.Fragment,{children:[e.jsxs("fieldset",{children:[e.jsx(o,{to:`/account/orders/${btoa(r.id)}`,children:e.jsxs("strong",{children:["#",r.number]})}),e.jsx("p",{children:new Date(r.processedAt).toDateString()}),r.confirmationNumber&&e.jsxs("p",{children:["Confirmation: ",r.confirmationNumber]}),e.jsx("p",{children:r.financialStatus}),n&&e.jsx("p",{children:n}),e.jsx(F,{data:r.totalPrice}),e.jsx(o,{to:`/account/orders/${btoa(r.id)}`,children:"View Order →"})]}),e.jsx("br",{})]})}export{B as default,U as meta};
